{% comment %}
  JSON-LD structured data for search engine rich results.
  Renders Organization + WebSite on every page, plus type-specific schemas.
{% endcomment %}

{% assign site_url = site.url %}
{% assign og_image = site_url | append: '/assets/images/og-default.png' %}

<!-- Organization + WebSite (all pages) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ site_url }}/#organization",
      "name": "DocRouter.AI",
      "url": "{{ site_url }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ site_url }}/assets/images/analytiq_hub_logo_small.png"
      },
      "sameAs": [
        "https://twitter.com/bitdribble",
        "https://www.linkedin.com/company/docrouter",
        "https://github.com/andrei-radulescu-banu"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "{{ site_url }}/#website",
      "url": "{{ site_url }}",
      "name": "DocRouter.AI",
      "publisher": { "@id": "{{ site_url }}/#organization" }
    }
  ]
}
</script>

{% comment %}Homepage: SoftwareApplication{% endcomment %}
{% if page.url == '/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "DocRouter.AI",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web",
  "url": "{{ site_url }}",
  "description": "{{ site.description | strip_newlines | strip }}",
  "image": "{{ og_image }}",
  "offers": [
    {
      "@type": "Offer",
      "name": "Team",
      "price": "1000",
      "priceCurrency": "USD",
      "billingIncrement": "P1M"
    }
  ],
  "publisher": { "@id": "{{ site_url }}/#organization" }
}
</script>
{% endif %}

{% comment %}Blog posts: BlogPosting{% endcomment %}
{% if page.layout == 'post' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": {{ page.title | jsonify }},
  "description": {{ page.description | default: site.description | strip_newlines | jsonify }},
  "image": "{{ site_url }}{{ page.image | default: '/assets/images/og-default.png' }}",
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
  "author": {
    "@type": "Person",
    "name": {{ page.author | default: site.author.name | jsonify }}
  },
  "publisher": { "@id": "{{ site_url }}/#organization" },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ site_url }}{{ page.url }}"
  }
}
</script>
{% endif %}

{% comment %}Solutions pages: BreadcrumbList{% endcomment %}
{% if page.url contains '/solutions/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site_url }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Solutions",
      "item": "{{ site_url }}/solutions/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ page.title | jsonify }},
      "item": "{{ site_url }}{{ page.url }}"
    }
  ]
}
</script>
{% endif %}

{% comment %}Docs pages: BreadcrumbList{% endcomment %}
{% if page.url contains '/docs/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site_url }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Docs",
      "item": "{{ site_url }}/docs/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ page.title | jsonify }},
      "item": "{{ site_url }}{{ page.url }}"
    }
  ]
}
</script>
{% endif %}
