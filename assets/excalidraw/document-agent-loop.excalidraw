{
  "type": "excalidraw",
  "version": 2,
  "source": "vscode-webview://0g9mrj6id2scucq00jfnscpqetemih23ldko66f9j6om655gs2je",
  "elements": [
    {
      "type": "text",
      "version": 48,
      "versionNonce": 2037028116,
      "isDeleted": false,
      "id": "title",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 217.92987060546875,
      "y": 8,
      "strokeColor": "#1e293b",
      "backgroundColor": "transparent",
      "width": 211.039794921875,
      "height": 24,
      "seed": 1,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "Document Agent Loop",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Document Agent Loop"
    },
    {
      "type": "rectangle",
      "version": 22,
      "versionNonce": 402912812,
      "isDeleted": false,
      "id": "client-chat",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 180,
      "y": 52,
      "strokeColor": "#2563eb",
      "backgroundColor": "#dbeafe",
      "width": 280,
      "height": 52,
      "seed": 2,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 23,
      "versionNonce": 1392431764,
      "isDeleted": false,
      "id": "client-chat-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 195,
      "y": 62,
      "strokeColor": "#1e40af",
      "backgroundColor": "transparent",
      "width": 213.51319885253906,
      "height": 16.8,
      "seed": 3,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "Client: POST /chat (messages)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Client: POST /chat (messages)"
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 2130464940,
      "isDeleted": false,
      "id": "arr1",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 320,
      "y": 104,
      "strokeColor": "#1e293b",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 18,
      "seed": 4,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "client-chat",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "backend",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          18
        ]
      ]
    },
    {
      "type": "rectangle",
      "version": 22,
      "versionNonce": 976183316,
      "isDeleted": false,
      "id": "backend",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 180,
      "y": 122,
      "strokeColor": "#7c3aed",
      "backgroundColor": "#ede9fe",
      "width": 280,
      "height": 52,
      "seed": 5,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 23,
      "versionNonce": 1258642220,
      "isDeleted": false,
      "id": "backend-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 195,
      "y": 132,
      "strokeColor": "#6d28d9",
      "backgroundColor": "transparent",
      "width": 217.3695526123047,
      "height": 28.799999999999997,
      "seed": 6,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Backend: build context\n(system message, sanitize messages)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Backend: build context\n(system message, sanitize messages)"
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 1458716052,
      "isDeleted": false,
      "id": "arr2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 320,
      "y": 174,
      "strokeColor": "#1e293b",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 22,
      "seed": 7,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "backend",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "loop-frame",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          22
        ]
      ]
    },
    {
      "type": "rectangle",
      "version": 34,
      "versionNonce": 223352852,
      "isDeleted": false,
      "id": "loop-frame",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 60,
      "y": 196,
      "strokeColor": "#ca8a04",
      "backgroundColor": "transparent",
      "width": 560,
      "height": 264,
      "seed": 8,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799792757,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 23,
      "versionNonce": 1652386580,
      "isDeleted": false,
      "id": "loop-label",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 220,
      "y": 204,
      "strokeColor": "#a16207",
      "backgroundColor": "transparent",
      "width": 174.67236328125,
      "height": 19.2,
      "seed": 9,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "LOOP (max 10 rounds)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "LOOP (max 10 rounds)"
    },
    {
      "type": "rectangle",
      "version": 24,
      "versionNonce": 514949164,
      "isDeleted": false,
      "id": "call-llm",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 100,
      "y": 238,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 440,
      "height": 44,
      "seed": 10,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "id": "arr-loop-back",
          "type": "arrow"
        },
        {
          "id": "8y3E-SsaLX1d2QUmF30KD",
          "type": "arrow"
        }
      ],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 23,
      "versionNonce": 2135353492,
      "isDeleted": false,
      "id": "call-llm-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 115,
      "y": 248,
      "strokeColor": "#047857",
      "backgroundColor": "transparent",
      "width": 290.56890869140625,
      "height": 16.8,
      "seed": 11,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "1. Call LLM (with tools, current messages)",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "1. Call LLM (with tools, current messages)"
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 728275628,
      "isDeleted": false,
      "id": "arr3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 320,
      "y": 282,
      "strokeColor": "#1e293b",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 18,
      "seed": 12,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "call-llm",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "llm-response",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          18
        ]
      ]
    },
    {
      "type": "rectangle",
      "version": 22,
      "versionNonce": 285521428,
      "isDeleted": false,
      "id": "llm-response",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 100,
      "y": 300,
      "strokeColor": "#ca8a04",
      "backgroundColor": "#fef9c3",
      "width": 440,
      "height": 88,
      "seed": 13,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 23,
      "versionNonce": 2002281772,
      "isDeleted": false,
      "id": "llm-response-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 115,
      "y": 308,
      "strokeColor": "#a16207",
      "backgroundColor": "transparent",
      "width": 285.93182373046875,
      "height": 52.8,
      "seed": 14,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 11,
      "fontFamily": 1,
      "text": "2. LLM response:\n• Text only → return text to client ► DONE\n• Tool calls, need approval? Yes → PAUSE (turn_id)\n• Tool calls, No → run tools, append ► go to 1",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "2. LLM response:\n• Text only → return text to client ► DONE\n• Tool calls, need approval? Yes → PAUSE (turn_id)\n• Tool calls, No → run tools, append ► go to 1"
    },
    {
      "type": "rectangle",
      "version": 22,
      "versionNonce": 346870676,
      "isDeleted": false,
      "id": "done",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 100,
      "y": 402,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 118,
      "height": 36,
      "seed": 15,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 26,
      "versionNonce": 2011881388,
      "isDeleted": false,
      "id": "done-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 108,
      "y": 410,
      "strokeColor": "#047857",
      "backgroundColor": "transparent",
      "width": 33.88824462890625,
      "height": 14.399999999999999,
      "seed": 16,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "DONE",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "DONE"
    },
    {
      "type": "rectangle",
      "version": 22,
      "versionNonce": 2020950292,
      "isDeleted": false,
      "id": "pause",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 261,
      "y": 402,
      "strokeColor": "#dc2626",
      "backgroundColor": "#fee2e2",
      "width": 118,
      "height": 36,
      "seed": 17,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 24,
      "versionNonce": 1699351084,
      "isDeleted": false,
      "id": "pause-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 269,
      "y": 410,
      "strokeColor": "#b91c1c",
      "backgroundColor": "transparent",
      "width": 39.75627136230469,
      "height": 14.399999999999999,
      "seed": 18,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "arr-pause-approve",
          "type": "arrow"
        }
      ],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "PAUSE",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "PAUSE"
    },
    {
      "type": "rectangle",
      "version": 23,
      "versionNonce": 1943273108,
      "isDeleted": false,
      "id": "execute",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 422,
      "y": 402,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 118,
      "height": 36,
      "seed": 19,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "id": "arr-loop-back",
          "type": "arrow"
        }
      ],
      "updated": 1771799745279,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 91,
      "versionNonce": 163107244,
      "isDeleted": false,
      "id": "execute-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 427.5249938964844,
      "y": 408,
      "strokeColor": "#047857",
      "backgroundColor": "transparent",
      "width": 59.344573974609375,
      "height": 26.4,
      "seed": 20,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "arr-loop-back",
          "type": "arrow"
        }
      ],
      "updated": 1771799753568,
      "link": null,
      "locked": false,
      "fontSize": 11,
      "fontFamily": 1,
      "text": "CONTINUE\n",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "CONTINUE\n"
    },
    {
      "type": "arrow",
      "version": 55,
      "versionNonce": 1602161684,
      "isDeleted": false,
      "id": "arr-loop-back",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 540,
      "y": 420,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 20,
      "height": 160,
      "seed": 21,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "execute",
        "focus": 0.9291338582677166,
        "gap": 1
      },
      "endBinding": {
        "elementId": "call-llm",
        "focus": -0.975609756097561,
        "gap": 1
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          20,
          -80
        ],
        [
          0,
          -160
        ]
      ]
    },
    {
      "type": "text",
      "version": 86,
      "versionNonce": 618032940,
      "isDeleted": false,
      "id": "label-loop-back",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 580,
      "y": 360,
      "strokeColor": "#059669",
      "backgroundColor": "#ecfdf5",
      "width": 25.209991455078125,
      "height": 36,
      "seed": 22,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 10,
      "fontFamily": 1,
      "text": "Call\nLLM\nagain",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Call\nLLM\nagain"
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 225208724,
      "isDeleted": false,
      "id": "arr-llm-done",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 159,
      "y": 388,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 14,
      "seed": 23,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "llm-response",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "done",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          14
        ]
      ]
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 488090028,
      "isDeleted": false,
      "id": "arr-llm-pause",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 320,
      "y": 388,
      "strokeColor": "#dc2626",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 14,
      "seed": 24,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "llm-response",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "pause",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          14
        ]
      ]
    },
    {
      "type": "arrow",
      "version": 22,
      "versionNonce": 550639380,
      "isDeleted": false,
      "id": "arr-llm-execute",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 481,
      "y": 388,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 14,
      "seed": 25,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "llm-response",
        "focus": 0,
        "gap": 0
      },
      "endBinding": {
        "elementId": "execute",
        "focus": 0,
        "gap": 0
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          14
        ]
      ]
    },
    {
      "type": "text",
      "version": 34,
      "versionNonce": 508400684,
      "isDeleted": false,
      "id": "if-paused",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 340,
      "y": 500,
      "strokeColor": "#64748b",
      "backgroundColor": "transparent",
      "width": 162.73318481445312,
      "height": 14.399999999999999,
      "seed": 26,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "(if we paused for approval)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "(if we paused for approval)"
    },
    {
      "type": "arrow",
      "version": 67,
      "versionNonce": 1197251500,
      "isDeleted": false,
      "id": "arr-pause-approve",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 320,
      "y": 440,
      "strokeColor": "#dc2626",
      "backgroundColor": "transparent",
      "width": 0,
      "height": 100,
      "seed": 27,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1771799767538,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "pause-text",
        "focus": -1.5656329556275326,
        "gap": 15.600000000000023
      },
      "endBinding": {
        "elementId": "client-approve-text",
        "focus": 0.00828167103605135,
        "gap": 10.000000000000057
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          100
        ]
      ]
    },
    {
      "type": "rectangle",
      "version": 40,
      "versionNonce": 837142700,
      "isDeleted": false,
      "id": "client-approve",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 160,
      "y": 540,
      "strokeColor": "#2563eb",
      "backgroundColor": "#dbeafe",
      "width": 340,
      "height": 40,
      "seed": 28,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "id": "uQRYUcozE4SJ-Tnksx3ki",
          "type": "arrow"
        }
      ],
      "updated": 1771799775522,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 31,
      "versionNonce": 723411476,
      "isDeleted": false,
      "id": "client-approve-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 175,
      "y": 550,
      "strokeColor": "#1e40af",
      "backgroundColor": "transparent",
      "width": 287.6180419921875,
      "height": 14.399999999999999,
      "seed": 29,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "arr-pause-approve",
          "type": "arrow"
        },
        {
          "id": "uQRYUcozE4SJ-Tnksx3ki",
          "type": "arrow"
        }
      ],
      "updated": 1771799745279,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Client: POST /chat/approve (turn_id, approvals)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Client: POST /chat/approve (turn_id, approvals)"
    },
    {
      "type": "rectangle",
      "version": 52,
      "versionNonce": 576856108,
      "isDeleted": false,
      "id": "backend-load",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 160,
      "y": 620,
      "strokeColor": "#7c3aed",
      "backgroundColor": "#ede9fe",
      "width": 340,
      "height": 48,
      "seed": 31,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "id": "uQRYUcozE4SJ-Tnksx3ki",
          "type": "arrow"
        }
      ],
      "updated": 1771799785538,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 46,
      "versionNonce": 1148209300,
      "isDeleted": false,
      "id": "backend-load-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 175,
      "y": 628,
      "strokeColor": "#6d28d9",
      "backgroundColor": "transparent",
      "width": 319.77825927734375,
      "height": 14.399999999999999,
      "seed": 32,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "uQRYUcozE4SJ-Tnksx3ki",
          "type": "arrow"
        },
        {
          "id": "8y3E-SsaLX1d2QUmF30KD",
          "type": "arrow"
        }
      ],
      "updated": 1771799785538,
      "link": null,
      "locked": false,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Backend: load turn state, run approved tools, append",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Backend: load turn state, run approved tools, append"
    },
    {
      "id": "uQRYUcozE4SJ-Tnksx3ki",
      "type": "arrow",
      "x": 319.9728600391972,
      "y": 580,
      "width": 0.23992110472914874,
      "height": 41.33333333333337,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 603322924,
      "version": 130,
      "versionNonce": 2040684436,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1771799785707,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -0.23992110472914874,
          41.33333333333337
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "client-approve-text",
        "focus": -0.009010603218046061,
        "gap": 15.599999999999966
      },
      "endBinding": {
        "elementId": "backend-load-text",
        "focus": -0.09527038387275566,
        "gap": 6.666666666666686
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "8y3E-SsaLX1d2QUmF30KD",
      "type": "arrow",
      "x": 499.99999999999994,
      "y": 640.2555441676045,
      "width": 80.00000000000006,
      "height": 380.2555441676045,
      "angle": 0,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 1109318828,
      "version": 59,
      "versionNonce": 803476396,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1771799785707,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          80.00000000000006,
          -180.2555441676045
        ],
        [
          40.00000000000006,
          -380.2555441676045
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "backend-load-text",
        "focus": 1.0261827333728255,
        "gap": 5.22174072265625
      },
      "endBinding": {
        "elementId": "call-llm",
        "focus": -0.9803921568627452,
        "gap": 1
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "gJE3QrdLrzAp93uS5BeaV",
      "type": "rectangle",
      "x": 0,
      "y": -20,
      "width": 680,
      "height": 740,
      "angle": 0,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 1966863764,
      "version": 63,
      "versionNonce": 285744660,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1771799953918,
      "link": null,
      "locked": false
    }
  ],
  "appState": {
    "gridSize": 20,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}